#!/bin/sh
# Encrypted installer - https://github.com/rikonor/inits
set -e
if ! command -v openssl >/dev/null 2>&1; then echo "Error: openssl required"; exit 1; fi
printf "Password: " > /dev/tty; stty -echo < /dev/tty 2>/dev/null || true; read PASSWORD < /dev/tty; stty echo < /dev/tty 2>/dev/null || true; echo "" > /dev/tty
PAYLOAD="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"
DECRYPTED=$(echo "$PAYLOAD" | openssl enc -aes-256-cbc -d -a -pbkdf2 -iter 100000 -k "$PASSWORD" 2>/dev/null) || { echo "Error: Decryption failed. Wrong password?"; exit 1; }
echo "$DECRYPTED" | sh
